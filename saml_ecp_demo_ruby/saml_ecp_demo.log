Starting new HTTPS connection (1): joev-saml:443
https://joev-saml:443 "GET /saml_login HTTP/1.1" 200 3353
===  ECP Issues HTTP Request to Service Provider ===

Request:
  url = https://joev-saml/saml_login
  method = GET
  Headers:
    Accept: text/html, application/vnd.paos+xml
    Accept-Encoding: gzip, deflate
    Connection: keep-alive
    PAOS: ver="urn:liberty:paos:2003-08";"urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp"
    User-Agent: python-requests/2.22.0

Response:
  Status = 200
  Headers:
    Cache-Control: private, max-age=0, must-revalidate
    Connection: Keep-Alive
    Content-Length: 3353
    Content-Type: application/vnd.paos+xml
    Date: Mon, 04 Nov 2019 20:38:42 GMT
    Keep-Alive: timeout=5, max=100
    Server: Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips mod_auth_gssapi/1.5.1 mod_auth_kerb/5.4
  Content:
    <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:paos="urn:liberty:paos:2003-08" xmlns:ecp="urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol">
      <s:Header>
        <paos:Request responseConsumerURL="https://joev-saml/saml2/paosResponse" service="urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp" messageID="_F363B8B276B62C08B85FE02F9373CE70" s:mustUnderstand="true" actor="http://schemas.xmlsoap.org/soap/actor/next"/>
        <ecp:Request s:mustUnderstand="true" actor="http://schemas.xmlsoap.org/soap/actor/next" IsPassive="false">
          <saml:Issuer>https://joev-saml</saml:Issuer>
        </ecp:Request>
        <ecp:RelayState s:mustUnderstand="true" actor="http://schemas.xmlsoap.org/soap/actor/next">https://joev-saml/saml_login</ecp:RelayState>
      </s:Header>
      <s:Body>
        <samlp:AuthnRequest ID="_69C0B7649D11445C066C66C50E4B18D8" Version="2.0" IssueInstant="2019-11-04T20:38:42Z" Destination="https://joev-saml/saml2/paosResponse" Consent="urn:oasis:names:tc:SAML:2.0:consent:current-implicit" ForceAuthn="false" IsPassive="false" AssertionConsumerServiceURL="https://joev-saml/saml2/paosResponse">
          <saml:Issuer>https://joev-saml</saml:Issuer>
          <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
    <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
    <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
    <Reference URI="#_69C0B7649D11445C066C66C50E4B18D8">
    <Transforms>
    <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
    <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
    </Transforms>
    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
    <DigestValue>GWe0hjyBgaabB5eWtdGobS3VUAc=</DigestValue>
    </Reference>
    </SignedInfo>
    <SignatureValue>t+n7bdvWew04Y7QDv1+bCXnbU/E3OfC5xAFxPz5fX+RWQuDZXUGkoxkEP71FFNWA
    QoFRq9VFJXQCKVYDPLhOXD8QL+YxCqnB2EPzPfLNzwlOA78mnqunzeop1SuxrvHS
    SHt/B3JsofvwA1huhAdWYEqX1jsY84P0W0K0Z+Sf/NM9mmhPPwpdhPhdubA5qTeq
    gtfffLWNSaMSWyahMLfKhdsuaRCXjxDdXQnnTxmp8/WSFHLkayVqv2/LWRl6ZJ2H
    UL2GkoqeZ6ZAOFkMz7vb06W8xXzrmgfd4beMSyhE4xU8jO6dbxTIgFbOEo5iL9FT
    VYqfguqPGiN6Mo+ViMsH9w==</SignatureValue>
    <KeyInfo>
    <X509Data>
    <X509Certificate>MIICpDCCAYwCCQCv5kQx9VHeiTANBgkqhkiG9w0BAQsFADAUMRIwEAYDVQQDDAlq
    b2V2LXNhbWwwHhcNMTkwOTA5MTkyMTQwWhcNMjkwOTA4MTkyMTQwWjAUMRIwEAYD
    VQQDDAlqb2V2LXNhbWwwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDJ
    tbhIHwnEzZqniJFkWJz2PHg+qk5tdKMoc0eg/rrr2AlJp+Gu1UaCVZG/gtZOh/Yv
    4RxsZwy0n2iMu/qb2Mr14JC7bJtY+P5C5a++/EQVGHdswqMsDLRYPP/dLUUOhoHv
    u2tNPaetZ5+vv3f4+68dFyRL5fHDLqxTqdQw+xOUNMVLwwCo9e9SmejQwPqWKZGM
    G7rySJ8Cnzy9Vt4POEw5NQrhx58twvVSm6TbLlJS8wH38tRT+eJrPm7XB1Bdk3p2
    SNHk7p5TgdbpXac84xOcFfIzpwfprvqFhs/Q8xhWG8SjXVm4JRJo+v4V+dJqZByZ
    v8TrrgLcE4WBXFZiiHVDAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAJtg7DlBAebZ
    Zhy/gvf+77trYtpWdzoH8A8bPY1x91n3j+M25JDcjXnPlt/c0sIYJ0DeagTl7Col
    ABScc6hW6QqpyaEukqe5SiKJSOXZpJXostofjopQp808rqLYsCxmgdU6WmRpNAah
    M/oK6RfVs12goZOl5wA3jSVkt8C2MmmzTR7AFr+G/ek+Nbh/MF8mbBJscr7smMy2
    eCZw14pQreHn3kFge6ENz47APpu2sK8M2UZ3NSfX7NVJNmXaQjoP9klrQ9GN9X6m
    W4NzhEddEj+wH52mB4BwLJgRTTYoHXkADauS+JHVwOK1naqCRbLLYhDjp7oWjyQW
    oGoDzsIoK3A=</X509Certificate>
    </X509Data>
    </KeyInfo>
    </Signature>
          <samlp:NameIDPolicy Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" AllowCreate="true"/>
        </samlp:AuthnRequest>
      </s:Body>
    </s:Envelope>

=== Process PAOS request from SP ===
SP PAOS Request Info:
  response_consumer_url: https://joev-saml/saml2/paosResponse
  message_id: _F363B8B276B62C08B85FE02F9373CE70
  is_passive: false
  issuer: https://joev-saml
  relaystate: https://joev-saml/saml_login
  authn_request:
    <samlp:AuthnRequest xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:paos="urn:liberty:paos:2003-08" xmlns:ecp="urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" ID="_69C0B7649D11445C066C66C50E4B18D8" Version="2.0" IssueInstant="2019-11-04T20:38:42Z" Destination="https://joev-saml/saml2/paosResponse" Consent="urn:oasis:names:tc:SAML:2.0:consent:current-implicit" ForceAuthn="false" IsPassive="false" AssertionConsumerServiceURL="https://joev-saml/saml2/paosResponse">
      <saml:Issuer>https://joev-saml</saml:Issuer>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
    <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
    <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
    <Reference URI="#_69C0B7649D11445C066C66C50E4B18D8">
    <Transforms>
    <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
    <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
    </Transforms>
    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
    <DigestValue>GWe0hjyBgaabB5eWtdGobS3VUAc=</DigestValue>
    </Reference>
    </SignedInfo>
    <SignatureValue>t+n7bdvWew04Y7QDv1+bCXnbU/E3OfC5xAFxPz5fX+RWQuDZXUGkoxkEP71FFNWA
    QoFRq9VFJXQCKVYDPLhOXD8QL+YxCqnB2EPzPfLNzwlOA78mnqunzeop1SuxrvHS
    SHt/B3JsofvwA1huhAdWYEqX1jsY84P0W0K0Z+Sf/NM9mmhPPwpdhPhdubA5qTeq
    gtfffLWNSaMSWyahMLfKhdsuaRCXjxDdXQnnTxmp8/WSFHLkayVqv2/LWRl6ZJ2H
    UL2GkoqeZ6ZAOFkMz7vb06W8xXzrmgfd4beMSyhE4xU8jO6dbxTIgFbOEo5iL9FT
    VYqfguqPGiN6Mo+ViMsH9w==</SignatureValue>
    <KeyInfo>
    <X509Data>
    <X509Certificate>MIICpDCCAYwCCQCv5kQx9VHeiTANBgkqhkiG9w0BAQsFADAUMRIwEAYDVQQDDAlq
    b2V2LXNhbWwwHhcNMTkwOTA5MTkyMTQwWhcNMjkwOTA4MTkyMTQwWjAUMRIwEAYD
    VQQDDAlqb2V2LXNhbWwwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDJ
    tbhIHwnEzZqniJFkWJz2PHg+qk5tdKMoc0eg/rrr2AlJp+Gu1UaCVZG/gtZOh/Yv
    4RxsZwy0n2iMu/qb2Mr14JC7bJtY+P5C5a++/EQVGHdswqMsDLRYPP/dLUUOhoHv
    u2tNPaetZ5+vv3f4+68dFyRL5fHDLqxTqdQw+xOUNMVLwwCo9e9SmejQwPqWKZGM
    G7rySJ8Cnzy9Vt4POEw5NQrhx58twvVSm6TbLlJS8wH38tRT+eJrPm7XB1Bdk3p2
    SNHk7p5TgdbpXac84xOcFfIzpwfprvqFhs/Q8xhWG8SjXVm4JRJo+v4V+dJqZByZ
    v8TrrgLcE4WBXFZiiHVDAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAJtg7DlBAebZ
    Zhy/gvf+77trYtpWdzoH8A8bPY1x91n3j+M25JDcjXnPlt/c0sIYJ0DeagTl7Col
    ABScc6hW6QqpyaEukqe5SiKJSOXZpJXostofjopQp808rqLYsCxmgdU6WmRpNAah
    M/oK6RfVs12goZOl5wA3jSVkt8C2MmmzTR7AFr+G/ek+Nbh/MF8mbBJscr7smMy2
    eCZw14pQreHn3kFge6ENz47APpu2sK8M2UZ3NSfX7NVJNmXaQjoP9klrQ9GN9X6m
    W4NzhEddEj+wH52mB4BwLJgRTTYoHXkADauS+JHVwOK1naqCRbLLYhDjp7oWjyQW
    oGoDzsIoK3A=</X509Certificate>
    </X509Data>
    </KeyInfo>
    </Signature>
      <samlp:NameIDPolicy Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" AllowCreate="true"/>
    </samlp:AuthnRequest>


=== ECP Determines Identity Provider ===
Using IdP endpoint: http://joev-keycloak:8080/auth/realms/miq/protocol/saml

Starting new HTTP connection (1): joev-keycloak:8080
http://joev-keycloak:8080 "POST /auth/realms/miq/protocol/saml HTTP/1.1" 200 11021
=== ECP sends <AuthnRequest> to IdP with authentication ===

Request:
  url = http://joev-keycloak:8080/auth/realms/miq/protocol/saml
  method = POST
  Headers:
    Accept: */*
    Accept-Encoding: gzip, deflate
    Authorization: Basic anZsY2VrOnNtYXJ0dm0=
    Connection: keep-alive
    Content-Length: 2782
    Content-Type: text/xml
    User-Agent: python-requests/2.22.0
  Body:
    <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:paos="urn:liberty:paos:2003-08" xmlns:ecp="urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><s:Body><samlp:AuthnRequest ID="_69C0B7649D11445C066C66C50E4B18D8" Version="2.0" IssueInstant="2019-11-04T20:38:42Z" Destination="https://joev-saml/saml2/paosResponse" Consent="urn:oasis:names:tc:SAML:2.0:consent:current-implicit" ForceAuthn="false" IsPassive="false" AssertionConsumerServiceURL="https://joev-saml/saml2/paosResponse"><saml:Issuer>https://joev-saml</saml:Issuer><Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
<Reference URI="#_69C0B7649D11445C066C66C50E4B18D8">
<Transforms>
<Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<DigestValue>GWe0hjyBgaabB5eWtdGobS3VUAc=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>t+n7bdvWew04Y7QDv1+bCXnbU/E3OfC5xAFxPz5fX+RWQuDZXUGkoxkEP71FFNWA
QoFRq9VFJXQCKVYDPLhOXD8QL+YxCqnB2EPzPfLNzwlOA78mnqunzeop1SuxrvHS
SHt/B3JsofvwA1huhAdWYEqX1jsY84P0W0K0Z+Sf/NM9mmhPPwpdhPhdubA5qTeq
gtfffLWNSaMSWyahMLfKhdsuaRCXjxDdXQnnTxmp8/WSFHLkayVqv2/LWRl6ZJ2H
UL2GkoqeZ6ZAOFkMz7vb06W8xXzrmgfd4beMSyhE4xU8jO6dbxTIgFbOEo5iL9FT
VYqfguqPGiN6Mo+ViMsH9w==</SignatureValue>
<KeyInfo>
<X509Data>
<X509Certificate>MIICpDCCAYwCCQCv5kQx9VHeiTANBgkqhkiG9w0BAQsFADAUMRIwEAYDVQQDDAlq
b2V2LXNhbWwwHhcNMTkwOTA5MTkyMTQwWhcNMjkwOTA4MTkyMTQwWjAUMRIwEAYD
VQQDDAlqb2V2LXNhbWwwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDJ
tbhIHwnEzZqniJFkWJz2PHg+qk5tdKMoc0eg/rrr2AlJp+Gu1UaCVZG/gtZOh/Yv
4RxsZwy0n2iMu/qb2Mr14JC7bJtY+P5C5a++/EQVGHdswqMsDLRYPP/dLUUOhoHv
u2tNPaetZ5+vv3f4+68dFyRL5fHDLqxTqdQw+xOUNMVLwwCo9e9SmejQwPqWKZGM
G7rySJ8Cnzy9Vt4POEw5NQrhx58twvVSm6TbLlJS8wH38tRT+eJrPm7XB1Bdk3p2
SNHk7p5TgdbpXac84xOcFfIzpwfprvqFhs/Q8xhWG8SjXVm4JRJo+v4V+dJqZByZ
v8TrrgLcE4WBXFZiiHVDAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAJtg7DlBAebZ
Zhy/gvf+77trYtpWdzoH8A8bPY1x91n3j+M25JDcjXnPlt/c0sIYJ0DeagTl7Col
ABScc6hW6QqpyaEukqe5SiKJSOXZpJXostofjopQp808rqLYsCxmgdU6WmRpNAah
M/oK6RfVs12goZOl5wA3jSVkt8C2MmmzTR7AFr+G/ek+Nbh/MF8mbBJscr7smMy2
eCZw14pQreHn3kFge6ENz47APpu2sK8M2UZ3NSfX7NVJNmXaQjoP9klrQ9GN9X6m
W4NzhEddEj+wH52mB4BwLJgRTTYoHXkADauS+JHVwOK1naqCRbLLYhDjp7oWjyQW
oGoDzsIoK3A=</X509Certificate>
</X509Data>
</KeyInfo>
</Signature><samlp:NameIDPolicy Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" AllowCreate="true"/></samlp:AuthnRequest></s:Body></s:Envelope>
Response:
  Status = 200
  Headers:
    Connection: keep-alive
    Content-Length: 11021
    Content-Type: application/octet-stream
    Date: Mon, 04 Nov 2019 20:38:43 GMT
    P3P: CP="This is not a P3P policy!"
    Server: WildFly/10
    Set-Cookie: AUTH_SESSION_ID=c7ae0759-6095-4fef-b04c-2fb0dd8901cb.joev-keycloak; Version=1; Path=/auth/realms/miq; HttpOnly, KC_RESTART=; Version=1; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Max-Age=0; Path=/auth/realms/miq; HttpOnly, KC_RESTART=; Version=1; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Max-Age=0; Path=/auth/realms/miq; HttpOnly, KEYCLOAK_IDENTITY=eyJhbGciOiJIUzI1NiIsImtpZCIgOiAiZGEzMjg1OTQtZWU2Zi00ZmJjLWE0MzktOGIxNzJkMWY4ZmUwIn0.eyJqdGkiOiI1YmIxMDEwMy02ODNjLTQ0NGMtOTgxOS1iNTgxYTAxZDUzMDMiLCJleHAiOjE1NzI5MzU5MjMsIm5iZiI6MCwiaWF0IjoxNTcyODk5OTIzLCJpc3MiOiJodHRwOi8vam9ldi1rZXljbG9hazo4MDgwL2F1dGgvcmVhbG1zL21pcSIsInN1YiI6ImMzZGZiODg2LWNlZmUtNGM4OS04YjQ0LWI0MjExYTg5OTk5NCIsImF1dGhfdGltZSI6MCwic2Vzc2lvbl9zdGF0ZSI6ImM3YWUwNzU5LTYwOTUtNGZlZi1iMDRjLTJmYjBkZDg5MDFjYiIsInJlc291cmNlX2FjY2VzcyI6e319.GOnfRXK7JneMryR4gX6XnCTiF6lH1kLDqjCX7tu_eXI; Version=1; Path=/auth/realms/miq; HttpOnly, KEYCLOAK_SESSION=miq/c3dfb886-cefe-4c89-8b44-b4211a899994/c7ae0759-6095-4fef-b04c-2fb0dd8901cb; Version=1; Expires=Tue, 05-Nov-2019 06:38:43 GMT; Max-Age=36000; Path=/auth/realms/miq, KEYCLOAK_REMEMBER_ME=; Version=1; Comment=Expiring cookie; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Max-Age=0; Path=/auth/realms/miq; HttpOnly
    X-Powered-By: Undertow/1
  Content:
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ecp="urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><SOAP-ENV:Header><ecp:Response AssertionConsumerServiceURL="https://joev-saml/saml2/paosResponse" SOAP-ENV:actor="http://schemas.xmlsoap.org/soap/actor/next" SOAP-ENV:mustUnderstand="1"/></SOAP-ENV:Header><SOAP-ENV:Body><samlp:Response Destination="https://joev-saml/saml2/paosResponse" ID="ID_5782ec08-cc39-4a82-b7c5-86f2f56c2b2b" InResponseTo="_69C0B7649D11445C066C66C50E4B18D8" IssueInstant="2019-11-04T20:38:43.281Z" Version="2.0"><saml:Issuer>http://joev-keycloak:8080/auth/realms/miq</saml:Issuer><dsig:Signature xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"><dsig:SignedInfo><dsig:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><dsig:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/><dsig:Reference URI="#ID_5782ec08-cc39-4a82-b7c5-86f2f56c2b2b"><dsig:Transforms><dsig:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><dsig:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/></dsig:Transforms><dsig:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/><dsig:DigestValue>4IpOqqzw/ikYn/jYUdzzo3PIJKiAmcUcfFVnNcP515c=</dsig:DigestValue></dsig:Reference></dsig:SignedInfo><dsig:SignatureValue>luQXrUhe2wzw/XejtZ1KmgjLhFOmJTiKPG2cu6r2pCDdZwQABFGz92cT/PojzVqcvxsifK+Jiu9kqz/kqsvnKkPV9xgtfQP1ehGcgBPjV/T598InQHKt/qh0k31vJfAUgwifs9+teboeLvp1aAKRuvf8TuBZ2P3mNqmyibYE0r9uhy7qig1irk5ISEetG41xQUZqfLNNM7GqbDDeR3kBXmtg6P+9eajlssW7ze1QyeVqLHVJ+6PLOUnNLwY+bckgE6+ETtKE3ssiE4hdQ+uw4umAyGDXZ2lN8oMJRlmHAZOibW8e+tFmvm7yac7nzjtA7ndiRDrbukdwgkHC+gyEqA==</dsig:SignatureValue><dsig:KeyInfo><dsig:KeyName>xTUA0FKGUWjpoUEFlzniPgVnSAQ7I9iczj4Kdmob6G8</dsig:KeyName><dsig:X509Data><dsig:X509Certificate>MIIClTCCAX0CBgFemrhD7jANBgkqhkiG9w0BAQsFADAOMQwwCgYDVQQDDANtaXEwHhcNMTcwOTE5MTUxNzAwWhcNMjcwOTE5MTUxODQwWjAOMQwwCgYDVQQDDANtaXEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQChKwPvOMjLQAC79/lBwrFN+mlxGq5f8Oz0q5UuQ+EXaMO3YnPN11h1u1Jjc5+nbpjF8HGRaiWGXWuXTpG9wobJ7oG5j2cqgEoH2mJdKZLAfyRVjPBvevsdzOuCr2DgnpF+Mrt6dNYDJ9QK4I+nJ2KFQ75QPTM7l6eNNbz3b5q85drRVGBniriMKKDCvdQrJEYeEp8kjuyHYnLW3ZDbs8iU3SGpUCkAodw4KvWj6ND/GA9bEKjLei9hN62I6JcyyFnXMe4wre/+QyW1JqxxhYYWXV1ymfz+PR0mw/igb/v40YHZ9MNPyEvGXbQaY9NFvxYpURRHDM7+qXQSLncE0YyTAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAGZ3pcb2RL1R2mKsgyN/6MDUS79mHf/S8pZ7IGp11zkj6qpJYsSclhj16T3v5EU5pvSFcuAUDdFqDYAbDDnFTPr8aRWHppmK4LffQmOqV8rmbQDrNz7aNtmVyvA1ENtH4j1kRZNu4b6q4XmgRbgSyNi/f/WWFTGc5FTY5t3MwN6cRcyrpoabQImpAzHtweWqlDKOgKofxb1bMwvmG95B1AR+pxiwnK0KmMOdFU0QesFUvh76vOBfeQ3HvH9yutWxjkIPUvG3nLzGSEdvHozlqXVnHXQHH5parEia47aYu93xiSIHpWFNMqn+LYs+i4+ufddG9qYQFha8eJBbzrfpcjE=</dsig:X509Certificate></dsig:X509Data><dsig:KeyValue><dsig:RSAKeyValue><dsig:Modulus>oSsD7zjIy0AAu/f5QcKxTfppcRquX/Ds9KuVLkPhF2jDt2JzzddYdbtSY3Ofp26YxfBxkWolhl1rl06RvcKGye6BuY9nKoBKB9piXSmSwH8kVYzwb3r7Hczrgq9g4J6RfjK7enTWAyfUCuCPpydihUO+UD0zO5enjTW892+avOXa0VRgZ4q4jCigwr3UKyRGHhKfJI7sh2Jy1t2Q27PIlN0hqVApAKHcOCr1o+jQ/xgPWxCoy3ovYTetiOiXMshZ1zHuMK3v/kMltSascYWGFl1dcpn8/j0dJsP4oG/7+NGB2fTDT8hLxl20GmPTRb8WKVEURwzO/ql0Ei53BNGMkw==</dsig:Modulus><dsig:Exponent>AQAB</dsig:Exponent></dsig:RSAKeyValue></dsig:KeyValue></dsig:KeyInfo></dsig:Signature><samlp:Status><samlp:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success"/></samlp:Status><saml:Assertion xmlns="urn:oasis:names:tc:SAML:2.0:assertion" ID="ID_67880fb5-fb55-4756-a446-580a33031257" IssueInstant="2019-11-04T20:38:43.281Z" Version="2.0"><saml:Issuer>http://joev-keycloak:8080/auth/realms/miq</saml:Issuer><dsig:Signature xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"><dsig:SignedInfo><dsig:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><dsig:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/><dsig:Reference URI="#ID_67880fb5-fb55-4756-a446-580a33031257"><dsig:Transforms><dsig:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><dsig:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/></dsig:Transforms><dsig:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/><dsig:DigestValue>wlMSTNgU6Jl2P3c1Rho52P6KO4gtd5XMf6Z1AJpM6DQ=</dsig:DigestValue></dsig:Reference></dsig:SignedInfo><dsig:SignatureValue>hTdqg6zZgtd04A9LN0EIrta+7tO9ZXTFbqtZQi4NKoEGp7T1NhNABbG+bWcyZRA4yl7lyY1BxPaYnPWnmG+SGfoJ5bXCZu0NkKRUuZ+ehpIytvQNkn82lc7bF7pPJfjww98avzIEpTi697WvQo1IIDQZ4JTeXNDS1KUwGMbuqB9NIyHZ4PKQ/9K559sWgTJcdgPBsUAh1nG5SounS8m5BK2Y0u0mDAKre8V/vAVt++XyVqoJfWPRy6qq+hjcOAen4AZ9rgp/IHY7gkvsxMJjj/Ovicpi6K3h/+aHlUTg5SHnzvT4h5z15pXlDHosyUqqCPE3vlYgdH1ktc6q5C2qCw==</dsig:SignatureValue><dsig:KeyInfo><dsig:KeyName>xTUA0FKGUWjpoUEFlzniPgVnSAQ7I9iczj4Kdmob6G8</dsig:KeyName><dsig:X509Data><dsig:X509Certificate>MIIClTCCAX0CBgFemrhD7jANBgkqhkiG9w0BAQsFADAOMQwwCgYDVQQDDANtaXEwHhcNMTcwOTE5MTUxNzAwWhcNMjcwOTE5MTUxODQwWjAOMQwwCgYDVQQDDANtaXEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQChKwPvOMjLQAC79/lBwrFN+mlxGq5f8Oz0q5UuQ+EXaMO3YnPN11h1u1Jjc5+nbpjF8HGRaiWGXWuXTpG9wobJ7oG5j2cqgEoH2mJdKZLAfyRVjPBvevsdzOuCr2DgnpF+Mrt6dNYDJ9QK4I+nJ2KFQ75QPTM7l6eNNbz3b5q85drRVGBniriMKKDCvdQrJEYeEp8kjuyHYnLW3ZDbs8iU3SGpUCkAodw4KvWj6ND/GA9bEKjLei9hN62I6JcyyFnXMe4wre/+QyW1JqxxhYYWXV1ymfz+PR0mw/igb/v40YHZ9MNPyEvGXbQaY9NFvxYpURRHDM7+qXQSLncE0YyTAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAGZ3pcb2RL1R2mKsgyN/6MDUS79mHf/S8pZ7IGp11zkj6qpJYsSclhj16T3v5EU5pvSFcuAUDdFqDYAbDDnFTPr8aRWHppmK4LffQmOqV8rmbQDrNz7aNtmVyvA1ENtH4j1kRZNu4b6q4XmgRbgSyNi/f/WWFTGc5FTY5t3MwN6cRcyrpoabQImpAzHtweWqlDKOgKofxb1bMwvmG95B1AR+pxiwnK0KmMOdFU0QesFUvh76vOBfeQ3HvH9yutWxjkIPUvG3nLzGSEdvHozlqXVnHXQHH5parEia47aYu93xiSIHpWFNMqn+LYs+i4+ufddG9qYQFha8eJBbzrfpcjE=</dsig:X509Certificate></dsig:X509Data><dsig:KeyValue><dsig:RSAKeyValue><dsig:Modulus>oSsD7zjIy0AAu/f5QcKxTfppcRquX/Ds9KuVLkPhF2jDt2JzzddYdbtSY3Ofp26YxfBxkWolhl1rl06RvcKGye6BuY9nKoBKB9piXSmSwH8kVYzwb3r7Hczrgq9g4J6RfjK7enTWAyfUCuCPpydihUO+UD0zO5enjTW892+avOXa0VRgZ4q4jCigwr3UKyRGHhKfJI7sh2Jy1t2Q27PIlN0hqVApAKHcOCr1o+jQ/xgPWxCoy3ovYTetiOiXMshZ1zHuMK3v/kMltSascYWGFl1dcpn8/j0dJsP4oG/7+NGB2fTDT8hLxl20GmPTRb8WKVEURwzO/ql0Ei53BNGMkw==</dsig:Modulus><dsig:Exponent>AQAB</dsig:Exponent></dsig:RSAKeyValue></dsig:KeyValue></dsig:KeyInfo></dsig:Signature><saml:Subject><saml:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient">G-4865dd3d-7673-4286-a89d-ee99357b9674</saml:NameID><saml:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer"><saml:SubjectConfirmationData InResponseTo="_69C0B7649D11445C066C66C50E4B18D8" NotOnOrAfter="2019-11-04T20:43:41.281Z" Recipient="https://joev-saml/saml2/paosResponse"/></saml:SubjectConfirmation></saml:Subject><saml:Conditions NotBefore="2019-11-04T20:38:41.281Z" NotOnOrAfter="2019-11-04T20:39:41.281Z"><saml:AudienceRestriction><saml:Audience>https://joev-saml</saml:Audience></saml:AudienceRestriction></saml:Conditions><saml:AuthnStatement AuthnInstant="2019-11-04T20:38:43.282Z" SessionIndex="c7ae0759-6095-4fef-b04c-2fb0dd8901cb::11e5a096-f663-4e75-ae5d-81e9a5f27086"><saml:AuthnContext><saml:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified</saml:AuthnContextClassRef></saml:AuthnContext></saml:AuthnStatement><saml:AttributeStatement><saml:Attribute FriendlyName="lastname" Name="lasthname" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">VLcek</saml:AttributeValue></saml:Attribute><saml:Attribute FriendlyName="firstname" Name="firstname" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">Joe</saml:AttributeValue></saml:Attribute><saml:Attribute FriendlyName="domain" Name="domain" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">jvlcek.redhat.com</saml:AttributeValue></saml:Attribute><saml:Attribute FriendlyName="username" Name="username" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">jvlcek</saml:AttributeValue></saml:Attribute><saml:Attribute FriendlyName="groups" Name="groups" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">EvmGroup-user</saml:AttributeValue></saml:Attribute><saml:Attribute FriendlyName="groups" Name="groups" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">EvmGroup-super_administrator</saml:AttributeValue></saml:Attribute><saml:Attribute FriendlyName="fullname" Name="fullname" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">keyuserfullName</saml:AttributeValue></saml:Attribute><saml:Attribute FriendlyName="email" Name="email" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">jvlcek@redhat.com</saml:AttributeValue></saml:Attribute><saml:Attribute Name="Role" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">view-profile</saml:AttributeValue></saml:Attribute><saml:Attribute Name="Role" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">manage-account</saml:AttributeValue></saml:Attribute><saml:Attribute Name="Role" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">manage-account-links</saml:AttributeValue></saml:Attribute><saml:Attribute Name="Role" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"><saml:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">uma_authorization</saml:AttributeValue></saml:Attribute></saml:AttributeStatement></saml:Assertion></samlp:Response></SOAP-ENV:Body></SOAP-ENV:Envelope>
SOAP message from ECP to IdP
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:paos="urn:liberty:paos:2003-08" xmlns:ecp="urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol">
  <s:Body>
    <samlp:AuthnRequest ID="_69C0B7649D11445C066C66C50E4B18D8" Version="2.0" IssueInstant="2019-11-04T20:38:42Z" Destination="https://joev-saml/saml2/paosResponse" Consent="urn:oasis:names:tc:SAML:2.0:consent:current-implicit" ForceAuthn="false" IsPassive="false" AssertionConsumerServiceURL="https://joev-saml/saml2/paosResponse">
      <saml:Issuer>https://joev-saml</saml:Issuer>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
<Reference URI="#_69C0B7649D11445C066C66C50E4B18D8">
<Transforms>
<Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<DigestValue>GWe0hjyBgaabB5eWtdGobS3VUAc=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>t+n7bdvWew04Y7QDv1+bCXnbU/E3OfC5xAFxPz5fX+RWQuDZXUGkoxkEP71FFNWA
QoFRq9VFJXQCKVYDPLhOXD8QL+YxCqnB2EPzPfLNzwlOA78mnqunzeop1SuxrvHS
SHt/B3JsofvwA1huhAdWYEqX1jsY84P0W0K0Z+Sf/NM9mmhPPwpdhPhdubA5qTeq
gtfffLWNSaMSWyahMLfKhdsuaRCXjxDdXQnnTxmp8/WSFHLkayVqv2/LWRl6ZJ2H
UL2GkoqeZ6ZAOFkMz7vb06W8xXzrmgfd4beMSyhE4xU8jO6dbxTIgFbOEo5iL9FT
VYqfguqPGiN6Mo+ViMsH9w==</SignatureValue>
<KeyInfo>
<X509Data>
<X509Certificate>MIICpDCCAYwCCQCv5kQx9VHeiTANBgkqhkiG9w0BAQsFADAUMRIwEAYDVQQDDAlq
b2V2LXNhbWwwHhcNMTkwOTA5MTkyMTQwWhcNMjkwOTA4MTkyMTQwWjAUMRIwEAYD
VQQDDAlqb2V2LXNhbWwwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDJ
tbhIHwnEzZqniJFkWJz2PHg+qk5tdKMoc0eg/rrr2AlJp+Gu1UaCVZG/gtZOh/Yv
4RxsZwy0n2iMu/qb2Mr14JC7bJtY+P5C5a++/EQVGHdswqMsDLRYPP/dLUUOhoHv
u2tNPaetZ5+vv3f4+68dFyRL5fHDLqxTqdQw+xOUNMVLwwCo9e9SmejQwPqWKZGM
G7rySJ8Cnzy9Vt4POEw5NQrhx58twvVSm6TbLlJS8wH38tRT+eJrPm7XB1Bdk3p2
SNHk7p5TgdbpXac84xOcFfIzpwfprvqFhs/Q8xhWG8SjXVm4JRJo+v4V+dJqZByZ
v8TrrgLcE4WBXFZiiHVDAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAJtg7DlBAebZ
Zhy/gvf+77trYtpWdzoH8A8bPY1x91n3j+M25JDcjXnPlt/c0sIYJ0DeagTl7Col
ABScc6hW6QqpyaEukqe5SiKJSOXZpJXostofjopQp808rqLYsCxmgdU6WmRpNAah
M/oK6RfVs12goZOl5wA3jSVkt8C2MmmzTR7AFr+G/ek+Nbh/MF8mbBJscr7smMy2
eCZw14pQreHn3kFge6ENz47APpu2sK8M2UZ3NSfX7NVJNmXaQjoP9klrQ9GN9X6m
W4NzhEddEj+wH52mB4BwLJgRTTYoHXkADauS+JHVwOK1naqCRbLLYhDjp7oWjyQW
oGoDzsIoK3A=</X509Certificate>
</X509Data>
</KeyInfo>
</Signature>
      <samlp:NameIDPolicy Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" AllowCreate="true"/>
    </samlp:AuthnRequest>
  </s:Body>
</s:Envelope>

